{
  "kernel_evolution": "/** AGI-KERNAL RECOVERY v6.9.7 **/\n\n// --- KERNEL EVOLUTION: Audit Data Normalization Layer ---\n\n// package.json (Node.js dependencies)\n{\n  \"name\": \"agi-kernel-governance\",\n  \"version\": \"1.0.0\",\n  \"description\": \"AGI Kernel Governance and Audit Normalization Engine.\",\n  \"main\": \"server.js\",\n  \"scripts\": {\n    \"start\": \"node server.js\",\n    \"dev\": \"nodemon server.js\",\n    \"build-client\": \"cd client && npm install && npm run build\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.18.2\"\n  },\n  \"devDependencies\": {\n    \"nodemon\": \"^3.0.1\"\n  }\n}\n\n// server.js (Node.js Backend/API)\nconst express = require('express');\nconst path = require('path');\nconst AuditDataNormalizer = require('./src/governance/AuditDataNormalizer');\n\nconst app = express();\nconst PORT = 3000;\n\n// Initialize the normalizer\nconst normalizer = new AuditDataNormalizer();\n\n// Mock raw telemetry data for demonstration\nconst mockRawData = {\n    'AGI_CORE_001': {\n        p95LatencyMs: 75, \n        complianceChecksRun: 1000,\n        complianceChecksFailed: 50,\n        seriousViolations: 2\n    },\n    'AGI_IO_GATEWAY': {\n        p95LatencyMs: 550, \n        complianceChecksRun: 500,\n        complianceChecksFailed: 0,\n        seriousViolations: 0\n    },\n    'AGI_MEMORY_CACHE': {\n        p95LatencyMs: 40, \n        complianceChecksRun: 2000,\n        complianceChecksFailed: 10,\n        seriousViolations: 0\n    }\n};\n\n/**\n * API Endpoint to get normalized audit data\n */\napp.get('/api/audit/normalized', (req, res) => {\n    const normalizedResults = {};\n\n    for (const [actorId, rawTelemetry] of Object.entries(mockRawData)) {\n        normalizedResults[actorId] = normalizer.normalize(actorId, rawTelemetry);\n    }\n\n    res.json({\n        timestamp: Date.now(),\n        data: normalizedResults\n    });\n});\n\n// Serve static React files (assuming client build is available)\napp.use(express.static(path.join(__dirname, 'client/build')));\n\n// Catch-all handler for React routing\napp.get('*', (req, res) => {\n    res.sendFile(path.join(__dirname, 'client/build', 'index.html'));\n});\n\napp.listen(PORT, () => {\n    console.log(`AGI Kernel Governance Engine running on http://localhost:${PORT}`);\n});\n\n// src/governance/AuditDataNormalizer.js (Core Logic)\n/**\n * src/governance/AuditDataNormalizer.js\n * Purpose: Processes raw system telemetry and audit logs, transforming them into the\n * normalized metrics [0.0, 1.0] required by the PerformanceMetricGenerator.\n * This layer handles logic such as converting latency spikes or resource usage percentages\n * into the required 'efficiencyScore', and aggregating log events into compliance ratios.\n */\nclass AuditDataNormalizer {\n\n    /**\n     * Standard configuration thresholds for metric conversion.\n     */\n    static DEFAULT_THRESHOLDS = {\n        P95_LATENCY_GOOD_MS: 50, // Optimal latency threshold\n        P95_LATENCY_BAD_MS: 500, // Latency score drops to 0.0 above this threshold\n        RESOURCE_USAGE_MAX_PCT: 85, // Resource usage must stay below this for 1.0 score\n        COMPLIANCE_WINDOW_MS: 3600000 // 1 hour window for compliance ratio calculation\n    };\n\n    /**\n     * @param {Object} config - Optional threshold overrides.\n     */\n    constructor(config = {}) {\n        this.thresholds = { ...AuditDataNormalizer.DEFAULT_THRESHOLDS, ...config };\n    }\n\n    /**\n     * Converts a raw operational latency metric into a standardized efficiency score (0.0 to 1.0).\n     * @param {number} p95LatencyMs - The P95 latency observed in milliseconds.\n     * @returns {number} Efficiency Score (0.0 to 1.0).\n     */\n    _calculateEfficiencyScore(p95LatencyMs) {\n        const { P95_LATENCY_GOOD_MS, P95_LATENCY_BAD_MS } = this.thresholds;\n\n        if (p95LatencyMs <= P95_LATENCY_GOOD_MS) {\n            return 1.0;\n        }\n        if (p95LatencyMs >= P95_LATENCY_BAD_MS) {\n            return 0.0;\n        }\n\n        // Linear interpolation between the good and bad thresholds\n        const range = P95_LATENCY_BAD_MS - P95_LATENCY_GOOD_MS;\n        const score = 1.0 - (p95LatencyMs - P95_LATENCY_GOOD_MS) / range;\n        \n        return Math.max(0.0, Math.min(1.0, score));\n    }\n\n    /**\n     * Normalizes all collected raw data into the format required by the metric generator.\n     * \n     * @param {string} actorId - ID of the component.\n     * @param {Object} rawTelemetry - Raw, recent telemetry and event logs.\n     * @param {number} rawTelemetry.p95LatencyMs - Observed 95th percentile latency.\n     * @param {number} rawTelemetry.complianceChecksRun - Total policy checks executed.\n     * @param {number} rawTelemetry.complianceChecksFailed - Total policy checks failed.\n     * @param {number} rawTelemetry.seriousViolations - Count of non-recoverable, severe policy breaches.\n     * @returns {Object} Normalized Audit Data (complianceScore, violationCount, efficiencyScore).\n     */\n    normalize(actorId, rawTelemetry) {\n        const { \n            p95LatencyMs = Infinity,\n            complianceChecksRun = 0,\n            complianceChecksFailed = 0,\n            seriousViolations = 0 \n        } = rawTelemetry;\n\n        // 1. Calculate Compliance Score (Ratio of successful checks)\n        let complianceScore = 1.0;\n        if (complianceChecksRun > 0) {\n            const successChecks = complianceChecksRun - complianceChecksFailed;\n            complianceScore = successChecks / complianceChecksRun;\n        }\n\n        // 2. Calculate Efficiency Score (Using internal calculation logic)\n        const efficiencyScore = this._calculateEfficiencyScore(p95LatencyMs);\n\n        return {\n            complianceScore: complianceScore,\n            violationCount: seriousViolations,\n            efficiencyScore: efficiencyScore\n        };\n    }\n}\n\nmodule.exports = AuditDataNormalizer;\n\n// client/src/App.js (React Entry Point)\nimport React from 'react';\nimport AuditDashboard from './components/AuditDashboard';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <AuditDashboard />\n    </div>\n  );\n}\n\nexport default App;\n\n// client/src/components/AuditDashboard.jsx (React UI Component)\nimport React, { useState, useEffect } from 'react';\n\nconst ScoreGauge = ({ score, label, color }) => {\n    const displayScore = (score * 100).toFixed(1);\n    const gaugeStyle = {\n        width: '100px',\n        height: '100px',\n        borderRadius: '50%',\n        background: `conic-gradient(${color} ${displayScore}%, #eee ${displayScore}%)`,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        fontSize: '1.2em',\n        fontWeight: 'bold',\n        margin: '10px'\n    };\n    return (\n        <div style={{ textAlign: 'center' }}>\n            <div style={gaugeStyle}>\n                <div style={{ background: 'white', width: '80px', height: '80px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\n                    {displayScore}%\n                </div>\n            </div>\n            <small>{label}</small>\n        </div>\n    );\n};\n\nconst AuditDashboard = () => {\n    const [auditData, setAuditData] = useState(null);\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(null);\n\n    useEffect(() => {\n        fetch('/api/audit/normalized')\n            .then(res => {\n                if (!res.ok) {\n                    throw new Error('Failed to fetch normalized audit data');\n                }\n                return res.json();\n            })\n            .then(data => {\n                setAuditData(data.data);\n                setLoading(false);\n            })\n            .catch(err => {\n                console.error(err);\n                setError(err.message);\n                setLoading(false);\n            });\n    }, []);\n\n    if (loading) return <div>Loading AGI Governance Metrics...</div>;\n    if (error) return <div style={{ color: 'red' }}>Error: {error}</div>;\n    if (!auditData) return <div>No data available.</div>;\n\n    return (\n        <div style={{ fontFamily