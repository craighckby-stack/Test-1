{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gsep.sovereign.agi/schemas/ArtifactTransitionMatrix.json",
  "title": "GSEP Artifact Workflow Transition Matrix",
  "description": "Defines valid sequential transitions between GSEP artifact types and mandates required linkage fields (e.g., parent hashes) for governance compliance.",
  "type": "object",
  "properties": {
    "L0_Proposal": {
      "type": "object",
      "description": "Valid transitions from L0 artifact.",
      "properties": {
        "next": { "const": "L1_C-FRAME" },
        "required_linkage": { "const": "artifact_id" }
      },
      "required": ["next", "required_linkage"]
    },
    "L1_C-FRAME": {
      "type": "object",
      "description": "Valid transitions from L1 artifact.",
      "properties": {
        "next": { "const": "L2_CodeEvolution" },
        "required_linkage": { "const": "parent_hash" }
      },
      "required": ["next", "required_linkage"]
    },
    "L2_CodeEvolution": {
      "type": "object",
      "description": "Valid transitions from L2 artifact.",
      "properties": {
        "next": { "const": "L3_EvaluationReport" },
        "required_linkage": { "const": "parent_hash" }
      },
      "required": ["next", "required_linkage"]
    },
    "L3_EvaluationReport": {
      "type": "object",
      "description": "Valid transitions from L3 artifact.",
      "properties": {
        "next": { "const": "L4_DSC" },
        "required_linkage": { "const": "parent_hash" }
      },
      "required": ["next", "required_linkage"]
    },
    "L4_DSC": {
      "type": "object",
      "description": "Valid transitions from L4 artifact.",
      "properties": {
        "next": { "const": "L5_Commitment" },
        "required_linkage": { "const": "parent_hash" }
      },
      "required": ["next", "required_linkage"]
    },
    "L5_Commitment": {
      "type": "object",
      "description": "Terminal state.",
      "properties": {
        "next": { "const": null }
      }
    }
  },
  "additionalProperties": false
}