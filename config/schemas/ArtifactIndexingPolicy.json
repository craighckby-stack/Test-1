{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agi.sovereign/schemas/v94/ArtifactIndexingPolicy.json",
  "title": "Sovereign AGI Artifact Indexing Policy Configuration",
  "description": "Defines rules for indexing code, configuration, documentation, and data fragments using hybrid methods (Vector, Keyword, Hierarchical) for optimal retrieval and RAG integration.",
  "type": "object",
  "properties": {
    "version": {
      "type": "string",
      "enum": [
        "v94.1"
      ],
      "description": "Policy schema version."
    },
    "defaultPolicy": {
      "type": "string",
      "enum": [
        "FULL_VECTOR",
        "METADATA_ONLY",
        "EXCLUDE"
      ],
      "default": "METADATA_ONLY",
      "description": "Default action for artifacts not matched by any explicit policy."
    },
    "policies": {
      "type": "array",
      "description": "Specific indexing rules applied based on priority.",
      "items": {
        "type": "object",
        "required": [
          "pathPattern",
          "strategy"
        ],
        "properties": {
          "pathPattern": {
            "type": "string",
            "format": "regex",
            "description": "Glob or Regex pattern matching artifact path (e.g., src/**/*.ts, experiments/old/**)."
          },
          "priority": {
            "type": "integer",
            "description": "Rules with higher priority (0-100) are evaluated first.",
            "default": 50
          },
          "strategy": {
            "type": "string",
            "enum": [
              "VECTOR",
              "KEYWORD_SEARCH",
              "HIERARCHICAL",
              "HYBRID_VEC_KW",
              "IGNORE"
            ],
            "description": "The core indexing method."
          },
          "embeddingModel": {
            "type": "string",
            "default": "sovereign-v94-large",
            "description": "Specific embedding model override for vector indexing, allowing tailored context understanding."
          },
          "chunking": {
            "type": "object",
            "description": "Settings for content segmentation before indexing.",
            "properties": {
              "maxTokens": {
                "type": "integer",
                "default": 768
              },
              "overlapTokens": {
                "type": "integer",
                "default": 128
              }
            }
          },
          "cacheTTLSeconds": {
            "type": "integer",
            "description": "Time-to-live for the indexed vector/entry. -1 means persistent.",
            "default": 3600
          },
          "metadataTags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Specific tags to attach to index entries for filtered search."
          }
        }
      }
    }
  },
  "required": [
    "version",
    "policies"
  ]
}