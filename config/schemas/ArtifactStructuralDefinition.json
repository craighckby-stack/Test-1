{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://gsep.sovereign.agi/schemas/ArtifactStructuralDefinition.json",
  "title": "GSEP Artifact Structural Definition Model (ASDM)",
  "description": "Defines standardized structures for critical GSEP artifacts (L0-L5) and enforces compliance via SHA linkage (S-CR) and validation signatures (A-CM).",
  "$defs": {
    "SHA256Hash": {
      "type": "string",
      "description": "A standardized SHA256 cryptographic hash (64 hex characters).",
      "pattern": "^[0-9a-fA-F]{64}$"
    },
    "ArtifactVersion": {
      "type": "string",
      "description": "Artifact versioning scheme, typically V#.#",
      "pattern": "^V\\d+\\.\\d+$"
    },
    "ArtifactType": {
      "type": "string",
      "description": "The formalized identifier for the artifact processing level (L0 through L5).",
      "enum": ["L0_Proposal", "L1_C-FRAME", "L2_CodeEvolution", "L3_EvaluationReport", "L4_DSC", "L5_Commitment"]
    },
    "ArtifactBase": {
      "type": "object",
      "properties": {
        "artifact_id": { "type": "string", "format": "uuid", "description": "Unique identifier for this specific artifact instance." },
        "timestamp": { "type": "string", "format": "date-time", "description": "Timestamp of artifact creation." },
        "artifact_type": { "$ref": "#/$defs/ArtifactType" },
        "version": { "$ref": "#/$defs/ArtifactVersion" }
      },
      "required": ["artifact_id", "timestamp", "artifact_type", "version"]
    },
    "ContextFrameManifest": {
      "allOf": [
        { "$ref": "#/$defs/ArtifactBase" },
        {
          "type": "object",
          "description": "L1 artifact: Context Framing and Scope Definition (C-FRAME).",
          "properties": {
            "artifact_type": { "const": "L1_C-FRAME" },
            "parent_hash": { "$ref": "#/$defs/SHA256Hash", "description": "Hash of the upstream L0 proposal document (Proposal Hash)." },
            "target_component": { "type": "string", "description": "The specific target component identifier (e.g., 'CoreLogic/M3')" },
            "scope_verified": { "type": "boolean", "description": "L2 preparation flag indicating scope boundaries are respected." }
          },
          "required": ["parent_hash", "target_component", "scope_verified"],
          "additionalProperties": false
        }
      ]
    },
    "DecisionalStateCheckpoint": {
      "allOf": [
        { "$ref": "#/$defs/ArtifactBase" },
        {
          "type": "object",
          "description": "L4 artifact: Governance Compliance Officer commitment checkpoint (DSC).",
          "properties": {
            "artifact_type": { "const": "L4_DSC" },
            "parent_hash": { "$ref": "#/$defs/SHA256Hash", "description": "Hash linking back to the associated L3 Evaluation Report." },
            "p01_result": { "type": "boolean", "description": "Primary Validation P01 outcome (Integrity Check)." },
            "s01_score": { "type": "number", "minimum": 0, "description": "Complexity Score S01." },
            "s02_score": { "type": "number", "minimum": 0, "description": "Security Review Score S02." },
            "final_signature": { "type": "string", "minLength": 64, "description": "Cryptographic signature of the L4 DSC decision payload." }
          },
          "required": ["parent_hash", "p01_result", "s01_score", "s02_score", "final_signature"],
          "additionalProperties": false
        }
      ]
    },
    "UndefinedArtifactPlaceholder": {
        "allOf": [
            { "$ref": "#/$defs/ArtifactBase" },
            {
                "type": "object",
                "description": "Placeholder definition for artifacts currently without explicit structural requirements (L0, L2, L3, L5).",
                "properties": {
                    "artifact_type": { "type": "string" }
                }
            }
        ]
    }
  },
  "type": "object",
  "properties": {
    "C-FRAME-V1": { "$ref": "#/$defs/ContextFrameManifest" },
    "DSC-V1": { "$ref": "#/$defs/DecisionalStateCheckpoint" },
    "Proposal-V1": { "$ref": "#/$defs/UndefinedArtifactPlaceholder" },
    "CodeEvo-V1": { "$ref": "#/$defs/UndefinedArtifactPlaceholder" },
    "EvalReport-V1": { "$ref": "#/$defs/UndefinedArtifactPlaceholder" },
    "Commitment-V1": { "$ref": "#/$defs/UndefinedArtifactPlaceholder" }
  },
  "required": []
}