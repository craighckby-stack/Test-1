{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "GICM.schema.json",
  "title": "Governance Inter-Agent Commitment Manifest",
  "description": "Defines the mandatory structure for the final ledger entry capturing pipeline execution results and agent attestations.",
  "type": "object",
  "required": [
    "version",
    "transition_id",
    "p_01_result",
    "metric_results",
    "veto_status",
    "agent_signatures"
  ],
  "properties": {
    "version": { "type": "string", "const": "V94.1" },
    "transition_id": { "type": "string", "description": "Unique hash identifying the state transition instance." },
    "input_hash_s1": { "type": "string", "description": "Hash of the certified input state from S1." },
    "final_state_hash_s11": { "type": "string", "description": "Hash of the committed $\Psi_{N+1}$ data artifact." },
    "p_01_result": {
      "type": "object",
      "required": ["pass", "finality_timestamp"],
      "properties": {
        "pass": { "type": "boolean", "description": "True if the P-01 Decision Axiom passed (S8)." },
        "finality_timestamp": { "type": "string", "format": "date-time" },
        "cftm_epsilon": { "type": "number", "description": "The threshold $\epsilon$ enforced by CFTM." }
      }
    },
    "metric_results": {
      "type": "object",
      "required": ["s01_utility", "s02_cost"],
      "properties": {
        "s01_utility": { "type": "number", "description": "Certified Utility Value ($S_{01}$)." },
        "s02_cost": { "type": "number", "description": "Estimated Cost/Failure Profile ($S_{02}$)." },
        "delta": { "type": "number", "description": "S01 - S02 - epsilon." }
      }
    },
    "veto_status": {
      "type": "object",
      "required": ["s03_policy", "s04_stability", "s06_5_behavioral", "s_context_pass"],
      "properties": {
        "s03_policy": { "type": "boolean", "description": "Result of Policy Veto Gate (S2). True if NOT vetoed." },
        "s04_stability": { "type": "boolean", "description": "Result of Stability Veto Gate (S3). True if NOT vetoed." },
        "s06_5_behavioral": { "type": "boolean", "description": "Result of Behavioral Veto Gate (S6.5). True if NOT vetoed." },
        "s_context_pass": { "type": "boolean", "description": "Result of Context Attestation (S4.5)." }
      }
    },
    "agent_signatures": {
      "type": "object",
      "required": ["sgs_s9_signature", "gax_s8_signature", "crot_s10_signature"],
      "properties": {
        "sgs_s9_signature": { "type": "string", "description": "SGS signature confirming NRALS logging and CISM finalization." },
        "gax_s8_signature": { "type": "string", "description": "GAX signature certifying P-01 finality." },
        "crot_s10_signature": { "type": "string", "description": "CRoT cryptographic lock and attestation signature over the entire GICM manifest." }
      }
    }
  }
}