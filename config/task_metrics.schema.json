{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://agi.sovereign/schemas/v94.1/task_metrics.schema.json",
  "title": "Sovereign AGI Task Metrics and Results Schema",
  "description": "Defines the structure for post-execution reporting and reflection data, essential for the AUTONOMOUS_REFLECTIVE execution phase.",
  "type": "object",
  "required": ["task_id", "status", "metrics", "timestamp_finish"],
  "properties": {
    "task_id": {
      "type": "string",
      "description": "Unique identifier of the completed task (matching GSC).",
      "pattern": "^[A-Z]{3}-\\d{5}$"
    },
    "status": {
      "type": "string",
      "enum": ["SUCCESS", "FAILURE", "TERMINATED_CONTEXT_LIMIT", "TERMINATED_MAX_ITERATIONS"],
      "description": "Final operational status of the task execution."
    },
    "timestamp_finish": {
      "type": "string",
      "format": "date-time",
      "description": "The time the task finished processing."
    },
    "iterations_executed": {
      "type": "integer",
      "minimum": 1,
      "description": "Total steps taken by the AGI to reach the final state."
    },
    "metrics": {
      "type": "object",
      "description": "Quantitative data regarding resource consumption.",
      "properties": {
        "total_tokens_consumed": { "type": "integer", "minimum": 0 },
        "compute_cost_usd": { "type": "number", "minimum": 0 },
        "execution_duration_ms": { "type": "integer", "minimum": 0 }
      },
      "required": ["total_tokens_consumed", "execution_duration_ms"]
    },
    "result_summary": {
      "type": "object",
      "description": "Qualitative and traceable results of the execution.",
      "properties": {
        "files_modified_count": { "type": "integer" },
        "new_files_scaffolded_count": { "type": "integer" },
        "test_run_success": { "type": "boolean", "description": "Did the post-modification test suite pass?" },
        "test_coverage_change": { "type": "number", "description": "Percentage point change in overall coverage (positive is improvement)." }
      }
    },
    "reflection_log": {
      "type": "string",
      "description": "A summarized self-reflection on task performance, errors, and future optimization points, generated by the AGI."
    }
  }
}