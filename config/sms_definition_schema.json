{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://sovereign.agi/schemas/v94/sms_definition_schema.json",
  "title": "Sovereign AGI SMS Definition Configuration Schema",
  "description": "Defines the structure and strict constraints for registering standardized SMS message templates.",
  "type": "object",
  "properties": {
    "sms_templates": {
      "type": "array",
      "description": "List of predefined, immutable SMS message templates.",
      "items": {
        "type": "object",
        "required": [
          "template_key",
          "content",
          "sender_profile_id",
          "message_type"
        ],
        "properties": {
          "template_key": {
            "type": "string",
            "pattern": "^[A-Z0-9_]{4,64}$",
            "description": "Unique, uppercase key for rapid template retrieval and referencing."
          },
          "description": {
            "type": "string",
            "maxLength": 256
          },
          "message_type": {
            "type": "string",
            "enum": [
              "TRANSACTIONAL",
              "MARKETING",
              "OTP_MFA",
              "SYSTEM_ALERT"
            ],
            "description": "Categorization crucial for regulatory compliance, routing, and filtering."
          },
          "sender_profile_id": {
            "type": "string",
            "description": "Reference ID to a defined Sender Profile (contains shortcode/alphanumeric ID/throttling group)."
          },
          "content": {
            "type": "string",
            "maxLength": 1600,
            "description": "The message body. Supports variables denoted by standard mustache/handlebar syntax (e.g., {{variable_name}})."
          },
          "encoding": {
            "type": "string",
            "enum": [
              "GSM_7",
              "UCS2"
            ],
            "default": "GSM_7",
            "description": "Specifies the required encoding for calculating segment length."
          },
          "max_segments": {
            "type": "integer",
            "minimum": 1,
            "maximum": 10,
            "default": 3,
            "description": "Maximum concatenated segments allowed. Prevents oversized messages."
          },
          "required_variables": {
            "type": "array",
            "description": "A list of required dynamic placeholder keys that must be supplied at runtime.",
            "items": {
              "type": "string",
              "pattern": "^[a-z_]{1,30}$"
            },
            "uniqueItems": true
          },
          "localization_defaults": {
            "type": "object",
            "description": "Default translations or locale-specific template overrides.",
            "additionalProperties": {
              "type": "string",
              "description": "Content override for specific locale key (e.g., 'es_MX')."
            }
          }
        },
        "additionalProperties": false
      }
    }
  },
  "required": [
    "sms_templates"
  ]
}