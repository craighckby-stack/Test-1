{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "System Metric Standard (SMS) Definition Schema",
  "description": "Defines the mandatory structure and thresholds for calculating S-01 (Efficacy) and S-02 (Risk) metrics used by SDR and HMC agents, required for P-01 commitment.",
  "type": "object",
  "required": ["metric_version", "threshold_configuration", "metric_definitions"],
  "properties": {
    "metric_version": {
      "type": "string",
      "description": "Semantic version of the SMS implementation."
    },
    "threshold_configuration": {
      "type": "object",
      "description": "Defines critical thresholds for L3 validation and L4 risk acceptance.",
      "required": ["efficacy_projection_threshold", "maximum_acceptable_risk"],
      "properties": {
        "efficacy_projection_threshold": {
          "type": "number",
          "description": "Minimum S-01 score required for L3 PASS (Efficacy Projection Check)."
        },
        "maximum_acceptable_risk": {
          "type": "number",
          "description": "Maximum permitted S-02 score, even if S-01 > S-02. Triggers fail-safe if exceeded."
        }
      }
    },
    "metric_definitions": {
      "type": "array",
      "description": "List of required metrics (S-01 and S-02 components) and their calculation weightings.",
      "items": {
        "type": "object",
        "required": ["metric_id", "agent", "calculation_method", "weighting"],
        "properties": {
          "metric_id": {
            "type": "string",
            "enum": ["S-01", "S-02"],
            "description": "Governing metric ID (Efficacy or Risk)."
          },
          "agent": {
            "type": "string",
            "enum": ["SDR", "HMC"],
            "description": "Agent responsible for calculation."
          },
          "calculation_method": {
            "type": "string",
            "description": "Reference to the internal computational logic module used for metric synthesis."
          },
          "weighting": {
            "type": "number",
            "description": "Primary factor weighting (must sum to 1.0 within complex calculations)."
          }
        }
      }
    }
  }
}