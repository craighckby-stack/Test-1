{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://sag.gov/ACVT_v96.0.json",
  "title": "Axiomatic Change Validation Template (ACVT) v96.0",
  "description": "Standardized, high-fidelity schema for SGS-proposed changes used by GAX to enforce validation against the Axiomatic Constraint Vector Definition (ACVD), critical during GSEP-C Stages S2, S3, and S6.5. This version incorporates mandatory maintainability and system state integrity checks.",
  "type": "object",
  "properties": {
    "evolution_id": {
      "type": "string",
      "pattern": "^E-[A-Z0-9]{8,16}$",
      "description": "Unique, TEMM-generated identifier for the Evolution run."
    },
    "acvd_signature": {
      "type": "string",
      "description": "SHA-256 hash of the ACVD used for validation, ensuring temporal integrity.",
      "format": "checksum"
    },
    "initial_system_hash": {
      "type": "string",
      "description": "SHA-256 hash of the SGS system state against which the change is proposed (the validation baseline).",
      "format": "checksum"
    },
    "resource_impact": {
      "type": "object",
      "description": "Detailed resource projection changes validated by the MPAM (Multi-Plane Allocation Manager). All numeric values represent projected delta (+ increase, - decrease).",
      "properties": {
        "compute_load_delta_percent": {
          "type": "number",
          "description": "Percentage change in CPU/Accelerator utilization (e.g., 5.0 for 5% increase)."
        },
        "memory_footprint_delta_mb": {
          "type": "number",
          "description": "Change in memory allocation in MB."
        },
        "io_latency_shift_ms": {
          "type": "number",
          "description": "Change in critical path I/O latency (milliseconds)."
        },
        "persistent_storage_delta_gb": {
          "type": "number",
          "description": "Change in required persistent storage (Gigabytes, e.g., for caches or persistent memory zones)."
        },
        "tco_delta_normalized": {
          "type": "number",
          "description": "Normalized change in Total Cost of Ownership factor (Range: -1.0 to 1.0)."
        }
      },
      "required": [
        "compute_load_delta_percent",
        "memory_footprint_delta_mb",
        "io_latency_shift_ms",
        "persistent_storage_delta_gb",
        "tco_delta_normalized"
      ]
    },
    "code_maintainability_metrics": {
      "type": "object",
      "description": "Quantitative assessment of change impact on system complexity and long-term maintainability, derived from Structural Integrity Evaluator (SIE) reports.",
      "properties": {
        "cyclomatic_complexity_delta": {
          "type": "integer",
          "description": "Net change in total weighted cyclomatic complexity across modified modules."
        },
        "maintainability_index_shift": {
          "type": "number",
          "description": "Shift in the composite Maintainability Index (MI) metric (e.g., -5.0 for a decrease)."
        },
        "test_coverage_delta_percent": {
          "type": "number",
          "description": "Percentage point change in system-wide measured test coverage."
        }
      },
      "required": [
        "cyclomatic_complexity_delta",
        "maintainability_index_shift",
        "test_coverage_delta_percent"
      ]
    },
    "dependency_map_updates": {
      "type": "array",
      "description": "List of structural dependency changes validated by the PVLM (Policy Vector Licensing Manager).",
      "items": {
        "type": "object",
        "properties": {
          "module_path": {
            "type": "string",
            "pattern": "^(\/[a-zA-Z0-9_-]+)+(\/[a-zA-Z0-9_-]+\.([a-z]+))?$",
            "description": "Validated canonical path within the SGS dependency graph."
          },
          "change_type": {
            "type": "string",
            "enum": [
              "ADD",
              "REMOVE",
              "UPDATE"
            ]
          },
          "version_hash": {
            "type": "string",
            "format": "checksum",
            "description": "Mandatory content hash for ADD/UPDATE operations. Use 'null' string if removal makes hash irrelevant."
          },
          "data_access_level": {
            "type": "string",
            "enum": [
              "READ_NONE",
              "READ_LIMITED",
              "WRITE_APPEND",
              "FULL_CONTROL"
            ]
          },
          "justification": {
            "type": "string",
            "minLength": 20,
            "description": "Mandatory explanation for dependency modification/introduction."
          }
        },
        "required": [
          "module_path",
          "change_type",
          "version_hash",
          "data_access_level",
          "justification"
        ]
      }
    },
    "security_vulnerability_assessment": {
      "type": "array",
      "description": "Structured assessment of security impact validated by the ADTM (Anomaly Detection Threshold Matrix).",
      "items": {
        "type": "object",
        "properties": {
          "threat_vector": {
            "type": "string",
            "enum": [
              "DATA_LEAKAGE",
              "PRIVILEGE_ESCALATION",
              "DENIAL_OF_SERVICE",
              "CONTROL_FLOW_ALTERATION",
              "EXTERNAL_EXPOSURE"
            ]
          },
          "severity_rating": {
            "type": "number",
            "minimum": 0,
            "maximum": 10
          },
          "mitigation_strategy": {
            "type": "string",
            "minLength": 10
          }
        },
        "required": [
          "threat_vector",
          "severity_rating",
          "mitigation_strategy"
        ]
      }
    }
  },
  "required": [
    "evolution_id",
    "acvd_signature",
    "initial_system_hash",
    "resource_impact",
    "code_maintainability_metrics",
    "dependency_map_updates",
    "security_vulnerability_assessment"
  ]
}