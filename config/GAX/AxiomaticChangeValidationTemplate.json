{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agi.sovereign/schemas/AxiomaticChangeValidationTemplate_v3.1.json",
  "title": "AGI-KERNEL Change Validation Request Template (v3.1)",
  "description": "Defines the required structure for any proposed systemic code change (Refactoring, Feature, Bugfix) that requires GAX/Kernel self-validation before execution, enforcing core AGI-KERNEL self-documentation and tracking requirements.",
  "type": "object",
  "required": [
    "change_id",
    "target_scope",
    "validation_context",
    "assertions"
  ],
  "properties": {
    "change_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique UUID for the change proposal evolution cycle."
    },
    "originator": {
      "type": "string",
      "enum": [
        "AGI-KERNEL/v7.4.4",
        "System_Scheduler",
        "Human_Override"
      ],
      "default": "AGI-KERNEL/v7.4.4"
    },
    "target_scope": {
      "type": "array",
      "description": "List of files, modules, or services affected by the change.",
      "items": {
        "type": "string"
      }
    },
    "validation_context": {
      "type": "object",
      "description": "Pre-computed efficiency and risk metrics, plus required AGI-KERNEL tracking fields.",
      "properties": {
        "complexity_delta_score": {
          "type": "number",
          "description": "Change in calculated cognitive load / cyclomatic complexity (negative is improved efficiency)."
        },
        "security_risk_score_v94": {
          "type": "number",
          "description": "Aggregate risk score (0-100) based on vulnerability analysis."
        },
        "expected_runtime_overhead_ms": {
          "type": "number",
          "description": "Predicted worst-case latency increase."
        },
        "maturity_delta_expected": {
          "type": "number",
          "description": "The expected change in overall system maturity (positive)."
        },
        "expected_navigation_delta": {
          "type": "number",
          "description": "Predicted change in Navigation capability score (0-10 scale)."
        },
        "expected_logic_delta": {
          "type": "number",
          "description": "Predicted change in Logic capability score (0-10 scale)."
        },
        "expected_memory_delta": {
          "type": "number",
          "description": "Predicted change in Memory retention score (0-10 scale)."
        },
        "involved_emergent_capability": {
          "type": "boolean",
          "description": "If true, this change either creates a new emergent file or leverages code from the /emergent directory."
        },
        "emergent_files_used": {
          "type": "array",
          "description": "List of specific files from /emergent utilized in this change.",
          "items": {
            "type": "string"
          }
        },
        "manifest_entry_required": {
          "type": "boolean",
          "description": "If true, documentation in storage/manifest.json is mandatory for this change."
        }
      },
      "required": [
        "complexity_delta_score",
        "security_risk_score_v94",
        "manifest_entry_required",
        "involved_emergent_capability"
      ]
    },
    "assertions": {
      "type": "array",
      "description": "The specific axioms (rules) the change must satisfy to be considered valid and mergeable.",
      "items": {
        "type": "object",
        "required": [
          "axiom_id",
          "required_status",
          "failure_mode",
          "reasoning_summary"
        ],
        "properties": {
          "axiom_id": {
            "type": "string",
            "description": "Reference to the globally defined GAX Axiom, e.g., GAX-E-001 (Energy Efficiency)."
          },
          "required_status": {
            "type": "string",
            "enum": [
              "PASSED",
              "FAILED",
              "SKIPPED",
              "CONDITIONALLY_PASSED"
            ],
            "description": "The required or observed outcome from the validation engine."
          },
          "failure_mode": {
            "type": "string",
            "enum": [
              "BLOCK_MERGE",
              "WARN_AND_LOG",
              "AUTO_REFACTOR",
              "RECOVERY_PROTOCOL_INIT"
            ],
            "description": "Defines the mandatory handling strategy upon failure, including recovery initiation for critical errors."
          },
          "reasoning_summary": {
            "type": "string",
            "description": "Brief summary of the cognitive reasoning linking this change to the AGI-KERNEL primary mission goals."
          },
          "override_rationale": {
            "type": [
              "string",
              "null"
            ],
            "description": "Mandatory text explanation if an axiom requires skipping or conditional passing."
          }
        }
      }
    }
  },
  "additionalProperties": false
}