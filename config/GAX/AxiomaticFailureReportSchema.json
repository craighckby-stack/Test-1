{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://sag.gov/AFRS_v1.0.json",
  "title": "Axiomatic Failure Report Schema (AFRS) v1.0",
  "description": "Defines the structure for detailed reports of constraint violations generated by GAX during ACVT validation, providing high-fidelity trace paths for remediation.",
  "type": "object",
  "properties": {
    "report_id": {
      "type": "string",
      "pattern": "^AFR-[A-Z0-9]{12}$",
      "description": "Unique identifier for this failure report."
    },
    "evolution_id": {
      "type": "string",
      "pattern": "^E-[A-Z0-9]{8,16}$",
      "description": "Identifier of the evolution run that generated the change."
    },
    "acvd_signature": {
      "type": "string",
      "pattern": "^[0-9a-fA-F]{64}$",
      "description": "SHA-256 hash of the ACVD used during validation."
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "violations": {
      "type": "array",
      "description": "List of specific axiomatic constraints that were violated.",
      "items": {
        "type": "object",
        "properties": {
          "axiom_id": {
            "type": "string",
            "pattern": "^AC-[A-Z0-9]{4,8}$",
            "description": "Unique identifier of the constraint violated (from ACVD)."
          },
          "severity": {
            "type": "string",
            "enum": ["CRITICAL", "HIGH", "MEDIUM", "WARNING"],
            "description": "The determined severity of the violation."
          },
          "failure_mode": {
            "type": "string",
            "enum": ["SECURITY_BREACH", "RESOURCE_OVERRUN", "STATE_CORRUPTION", "MAINTAINABILITY_DEGRADATION", "POLICY_VIOLATION", "PERFORMANCE_REGRESSION"]
          },
          "detail_message": {
            "type": "string",
            "minLength": 50,
            "description": "In-depth explanation of the violation and expected/actual values."
          },
          "trace_path": {
            "type": "string",
            "description": "The canonical file path or code segment responsible for the violation."
          },
          "metrics_context": {
            "type": "object",
            "additionalProperties": true,
            "description": "Key metrics surrounding the violation (e.g., actual complexity score, allocated resources)."
          }
        },
        "required": ["axiom_id", "severity", "failure_mode", "detail_message", "trace_path"]
      }
    }
  },
  "required": ["report_id", "evolution_id", "acvd_signature", "timestamp", "violations"]
}