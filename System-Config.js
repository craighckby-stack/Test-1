Implementing homomorphic encryption in federated learning