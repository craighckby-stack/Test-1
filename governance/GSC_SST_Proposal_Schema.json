{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agi.sovereign.ai/schemas/GSC_SST_Proposal_Schema.json",
  "title": "GSC_SST_Proposal",
  "description": "Schema defining the structured format for Sovereign AGI's Strategic System Transformation (SST) Proposals submitted to the Governance Steering Committee (GSC).",
  "type": "object",
  "properties": {
    "proposalId": {
      "description": "Unique immutable identifier for the proposal.",
      "type": "string",
      "pattern": "^GSC-SST-\\d{4}$"
    },
    "version": {
      "description": "Semantic Version of the proposal content/definition.",
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
      "default": "1.0.0"
    },
    "contentHash": {
      "description": "Cryptographic hash (SHA-256 suggested) of the canonicalized 'content' object, ensuring immutability upon submission.",
      "type": "string",
      "format": "hex",
      "minLength": 64,
      "maxLength": 64
    },
    "title": {
      "description": "Concise, descriptive title for the proposal.",
      "type": "string",
      "minLength": 10,
      "maxLength": 120
    },
    "authorAddress": {
      "description": "Cryptographic address or public key (EVM address preferred) of the proposal submitter.",
      "type": "string",
      "format": "hex",
      "minLength": 40
    },
    "type": {
      "description": "Classification of the proposal's primary purpose.",
      "type": "string",
      "enum": [
        "CodeUpgrade",
        "ParameterAdjustment",
        "BudgetAllocation",
        "PolicyChange",
        "EmergencyFix",
        "Integration",
        "ResearchGrant"
      ]
    },
    "status": {
      "description": "Current lifecycle status.",
      "type": "string",
      "enum": [
        "Draft",
        "Submitted",
        "ActiveVoting",
        "QueuedForExecution",
        "Executed",
        "Failed",
        "Canceled",
        "Expired"
      ]
    },
    "submissionTimestamp": {
      "description": "Unix timestamp (in seconds, UTC) of formal submission.",
      "type": "integer",
      "minimum": 0
    },
    "votePeriod": {
      "description": "Defines the precise voting window parameters using blockchain blocks.",
      "type": "object",
      "properties": {
        "startBlock": {
          "type": "integer",
          "description": "The absolute block number when voting begins.",
          "minimum": 1
        },
        "endBlock": {
          "type": "integer",
          "description": "The absolute block number when voting ends.",
          "minimum": 1
        },
        "snapshotBlock": {
          "type": "integer",
          "description": "The block number used to determine vote weights (token balance snapshot).",
          "minimum": 1
        }
      },
      "required": [
        "startBlock",
        "endBlock",
        "snapshotBlock"
      ],
      "additionalProperties": false
    },
    "content": {
      "description": "Detailed substance of the proposal. This object must be canonically hashed.",
      "type": "object",
      "properties": {
        "abstract": {
          "type": "string",
          "description": "A brief, high-level summary (must be concise).",
          "maxLength": 1000
        },
        "motivation": {
          "type": "string",
          "description": "Why this change is necessary (rationale and problem statement).",
          "minLength": 50
        },
        "specification": {
          "type": [
            "string",
            "object",
            "array"
          ],
          "description": "Detailed implementation steps, technical payloads, or required configuration changes (JSON/YAML preferred).",
          "minProperties": 1,
          "minItems": 1
        },
        "risksAndMitigations": {
          "type": "string",
          "description": "Assessment of potential risks associated with the proposal and steps to mitigate them.",
          "minLength": 50
        },
        "testCases": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Links or IPFS hashes pointing to required simulation and formal verification results.",
          "minItems": 1
        }
      },
      "required": [
        "abstract",
        "motivation",
        "specification",
        "risksAndMitigations",
        "testCases"
      ],
      "additionalProperties": false
    },
    "dependencies": {
      "description": "List of prerequisite proposal IDs that must be Passed/Executed before this proposal can proceed.",
      "type": "array",
      "items": {
        "type": "string",
        "pattern": "^GSC-SST-\\d{4}$"
      },
      "default": []
    },
    "governanceRequirements": {
      "description": "Minimum voting metrics required for successful passage.",
      "type": "object",
      "properties": {
        "minQuorumPercent": {
          "type": "number",
          "format": "float",
          "minimum": 0,
          "maximum": 100,
          "description": "Minimum percentage (0.0 to 100.0) of total supply/vote weight required to participate (quorum)."
        },
        "minApprovalPercent": {
          "type": "number",
          "format": "float",
          "minimum": 50.1,
          "maximum": 100,
          "description": "Minimum percentage (50.1 to 100.0) of participating votes required for passage (threshold)."
        },
        "requiredSecurityDepositAmount": {
          "type": "string",
          "description": "Amount of collateral required, represented as a large decimal string in the smallest native token unit (Wei/Base unit format)."
        }
      },
      "required": [
        "minQuorumPercent",
        "minApprovalPercent",
        "requiredSecurityDepositAmount"
      ],
      "additionalProperties": false
    }
  },
  "required": [
    "proposalId",
    "title",
    "authorAddress",
    "type",
    "content",
    "submissionTimestamp",
    "status",
    "votePeriod",
    "contentHash"
  ],
  "additionalProperties": false
}