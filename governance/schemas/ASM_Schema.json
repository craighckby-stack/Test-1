{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://sovereignagi.com/governance/schemas/ASM_Schema.json",
  "title": "Audit Summary Manifest (ASM) Schema",
  "description": "Defines the mandatory immutable output structure generated at GSEP L6 for persistence and auditability.",
  "type": "object",
  "required": ["tx_id", "version_lock", "metrics_summary", "veto_status", "p01_result", "timestamp"],
  "properties": {
    "tx_id": {
      "description": "The unique, immutable transaction ID generated by AIA.",
      "type": "string",
      "format": "uuid"
    },
    "version_lock": {
      "description": "The resulting manifest version committed.",
      "type": "string"
    },
    "metrics_summary": {
      "description": "Snapshot of the L3 and L4 constraint data used in P-01 arbitration.",
      "type": "object",
      "properties": {
        "S01_efficacy": {"type": "number"},
        "S02_risk": {"type": "number"},
        "epsilon_mandate": {"type": "number"}
      },
      "required": ["S01_efficacy", "S02_risk", "epsilon_mandate"]
    },
    "veto_status": {
      "description": "The $S-03$ check outcome.",
      "type": "boolean"
    },
    "p01_result": {
      "description": "The final binary outcome (PASS/FAIL) of the GCO L5 arbitration.",
      "type": "string",
      "enum": ["PASS", "FAIL"]
    },
    "timestamp": {
      "description": "Commitment timestamp.",
      "type": "string",
      "format": "date-time"
    },
    "ftl_reference": {
      "description": "Optional reference ID to the Failure Trace Log if P-01 resulted in FAIL.",
      "type": "string"
    }
  }
}