{
  "$schema": "http://json-schema.org/draft/2020-12/schema",
  "$id": "https://agi.sovereign/governance/WITS_Schema_v94.1.json",
  "title": "WITS_Schema_Formal",
  "description": "Formal JSON Schema definition for Workflow Integrity Telemetry System (WITS). Mandates strict structure and typing for GCO state logging.",
  "type": "object",
  "properties": {
    "schemaId": {
      "type": "string",
      "const": "WITS_V94.1",
      "description": "Internal identifier for schema version."
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 UTC timestamp of log entry creation."
    },
    "gsep_stage": {
      "type": "integer",
      "minimum": 0,
      "maximum": 6,
      "description": "Current Generalized Synthesis and Evolution Protocol (GSEP) stage indicator."
    },
    "gco_instance_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the Global Control Objective instance."
    },
    "mutation_id": {
      "type": "string",
      "format": "uuid",
      "description": "Identifier for the specific mutation/evolution event. Can be null/empty if not applicable."
    },
    "status": {
      "type": "string",
      "enum": [
        "INITIATED",
        "PROCESSING",
        "LOCKED",
        "FAIL",
        "PASS",
        "TERMINAL",
        "ARBITRATING"
      ],
      "description": "The current state of the GCO."
    },
    "elapsed_time_ms": {
      "type": "integer",
      "minimum": 0,
      "description": "Time elapsed (in milliseconds) since GCO initiation."
    },
    "arbitration_result": {
      "type": "object",
      "description": "Structured output derived from Evolutionary Protocol Determination Point (EPDP). Must ensure locking constraints for Outcome 'C'.",
      "properties": {
        "epdp_outcome": {
          "type": "string",
          "enum": ["A", "B", "C"],
          "description": "EPDP Decision (A, B, or C)."
        },
        "governance_locks": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": ["S-01_LOCKED", "S-02_LOCKED", "S-03_LOCKED", "NONE"]
          },
          "description": "List of applied Governance Constraint states. Must include S-01, S-02, S-03 if EPDP Outcome is C."
        }
      },
      "required": ["epdp_outcome", "governance_locks"]
    }
  },
  "required": [
    "schemaId",
    "timestamp",
    "gsep_stage",
    "gco_instance_id",
    "mutation_id",
    "status",
    "arbitration_result",
    "elapsed_time_ms"
  ],
  "additionalProperties": false
}