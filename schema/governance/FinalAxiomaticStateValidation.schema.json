{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agi.sovereign/schema/governance/FinalAxiomaticStateValidation.schema.json",
  "title": "Final Axiomatic State Validation Schema",
  "description": "Defines the required structure and validation constraints for the final, accepted, immutable state record in the governance ledger, requiring explicit cryptographic proof.",
  "type": "object",
  "required": [
    "stateHash",
    "validationTimestamp",
    "sourceSchemaId",
    "validationProof"
  ],
  "properties": {
    "stateHash": {
      "type": "string",
      "description": "Cryptographic hash (SHA-256 equivalent) of the full validated data payload.",
      "pattern": "^[a-fA-F0-9]{64}$"
    },
    "validationTimestamp": {
      "type": "string",
      "format": "date-time",
      "description": "The exact time the axiomatic state was finalized (ISO 8601)."
    },
    "sourceSchemaId": {
      "type": "string",
      "description": "Identifier linking back to the schema version that defined the validated state's structure."
    },
    "governanceEpoch": {
      "type": "integer",
      "minimum": 1,
      "description": "The specific governance epoch during which this state was finalized."
    },
    "validationProof": {
      "type": "object",
      "description": "Structured proof of consensus, referencing required signatures and mechanism.",
      "$ref": "#/$defs/ValidationProofStructure"
    }
  },
  "additionalProperties": false,
  "$defs": {
    "ValidatorSignature": {
      "type": "object",
      "title": "Proof Signature",
      "required": ["validatorId", "signature", "nonce"],
      "properties": {
        "validatorId": { "type": "string", "description": "ID of the sovereign validator.", "format": "uuid" },
        "signature": { "type": "string", "description": "Cryptographic signature over the stateHash and timestamp." },
        "nonce": { "type": "integer", "description": "A unique, increasing value used to prevent replay attacks." }
      },
      "additionalProperties": false
    },
    "ValidationProofStructure": {
      "type": "object",
      "title": "Axiomatic Proof Structure",
      "required": ["consensusMechanism", "thresholdMet", "signatures"],
      "properties": {
        "consensusMechanism": {
          "type": "string",
          "description": "Identifier for the consensus algorithm used (e.g., PoS-V2, BFT-10)."
        },
        "thresholdMet": {
          "type": "number",
          "minimum": 0.5,
          "maximum": 1.0,
          "description": "The minimum validation percentage or fractional quantity achieved (e.g., 0.667)."
        },
        "signatures": {
          "type": "array",
          "items": { "$ref": "#/$defs/ValidatorSignature" },
          "minItems": 1,
          "description": "A list of cryptographic attestations from authorized validators."
        }
      },
      "additionalProperties": false
    }
  }
}