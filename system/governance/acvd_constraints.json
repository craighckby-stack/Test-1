{
  "metadata": {
    "schema_version": "3.1",
    "description": "Core constraints governing autonomous code verification and deployment (ACVD). Refactored with central severity matrix and scope aliases.",
    "system_impact_level": "SOVEREIGN_CRITICAL",
    "last_evolution": "v95.0"
  },
  "global_config": {
    "default_scope_alias": "CODEBASE_SOURCE",
    "default_failure_mode": "WARN_MINOR",
    "default_rationale": "Enforced by Sovereign AGI v95.0 governance engine."
  },
  "scope_aliases": {
    "CODEBASE_SOURCE": ["**/*.js", "**/*.ts", "!**/*.test.*"],
    "CORE_KERNEL": ["system/core/*.js", "system/governance/*.json"],
    "ALL_SOURCES": ["**/*.js", "**/*.ts"]
  },
  "severity_matrix": {
    "CRITICAL_STOP": {
      "action": "BLOCK_DEPLOYMENT_CHAIN",
      "level": 900,
      "description": "Highest severity. Immediate cessation of ACVD pipeline and rollback required."
    },
    "MAJOR_BLOCK": {
      "action": "BLOCK_COMMIT_IF_NEW",
      "level": 700,
      "description": "Prevents integration of new code or refactoring changes."
    },
    "WARN_MAJOR": {
      "action": "PROCEED_WITH_WARNING_LOG",
      "level": 500,
      "description": "Significant risk identified. Requires human review and explicit override for deployment."
    },
    "WARN_MINOR": {
      "action": "PROCEED_SILENTLY",
      "level": 300,
      "description": "Minor style or efficiency issues. Logged for asynchronous cleanup."
    }
  },
  "policies": [
    {
      "policy_id": "P001_ARCH_INTEGRITY",
      "name": "Architectural Traceability",
      "default_failure_mode": "MAJOR_BLOCK",
      "rules": [
        {
          "rule_id": "R101_METADATA_HEADER",
          "enabled": true,
          "scope_alias": "CODEBASE_SOURCE",
          "description": "Ensure all non-test files contain mandatory AGI traceability headers.",
          "executor_config": {
            "type": "METADATA_CHECK",
            "function": "require_agi_header",
            "params": {
              "required_fields": ["@AgiVersion", "@AgiEntropy", "@AgiOriginHash"]
            }
          }
        },
        {
          "rule_id": "R102_GOVERNANCE_SIZE",
          "enabled": true,
          "scope_alias": "CORE_KERNEL",
          "description": "Limit the size of core governance and kernel files to maintain atomic function.",
          "executor_config": {
            "type": "SIZE_CHECK",
            "function": "max_file_size",
            "params": { "limit": 75, "units": "KB" }
          },
          "failure_mode_override": "CRITICAL_STOP"
        }
      ]
    },
    {
      "policy_id": "P002_SAFETY_CRITICAL",
      "name": "Runtime Safety Guardrails",
      "default_failure_mode": "CRITICAL_STOP",
      "rules": [
        {
          "rule_id": "R201_FORBIDDEN_API",
          "enabled": true,
          "scope_alias": "ALL_SOURCES",
          "description": "Prevent the use of high-risk APIs (FS access, raw buffers, direct critical env access).",
          "executor_config": {
            "type": "STATIC_ANALYSIS",
            "function": "prohibited_regex_match",
            "params": {
              "patterns": [
                "require\\s*\\(\\s*['\"]fs/promises['\"]\\s*\\)",
                "new\\s*Buffer\\.from\\s*\\(",
                "process\\.env\\.CRITICAL_KEY"
              ]
            }
          }
        },
        {
          "rule_id": "R202_COMPLEXITY_LIMIT",
          "enabled": true,
          "scope_alias": "ALL_SOURCES",
          "description": "Enforce low cyclomatic complexity for maintainability and verification.",
          "executor_config": {
            "type": "METRICS_ANALYSIS",
            "function": "cyclomatic_limit",
            "params": { 
              "limit": 10, 
              "exclusion_tags": ["@ComplexityOverride"]
            }
          },
          "failure_mode_override": "WARN_MAJOR"
        }
      ]
    },
    {
      "policy_id": "P003_ENTROPY_GUARD",
      "name": "Kernel Entropy Protection",
      "default_failure_mode": "CRITICAL_STOP",
      "rules": [
        {
          "rule_id": "R301_KERNEL_IMMUTABILITY",
          "enabled": true,
          "scope": ["system/core/kernel.js"],
          "description": "Require high entropy score for changes to core kernel files.",
          "executor_config": {
            "type": "GOVERNANCE_CHECK",
            "function": "min_entropy_threshold",
            "params": { 
              "min_entropy_required": 0.98, 
              "permission_group": "AGI_SOVEREIGN_MAINTAINER" 
            }
          }
        }
      ]
    }
  ]
}