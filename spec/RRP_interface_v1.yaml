# RRP_INTERFACE_V1.YAML: Rollback and Recovery Protocol Interface Specification

# Defines the mandatory structure for context capture triggered by GSEP-C Critical Halt Conditions.

RRP_CONTRACT_VERSION: "1.0"
TARGET_PROTOCOL: "GSEP-C V3.4"

failure_context:
  type: object
  required:
    - RRP_HOOK_ID
    - layer_id
    - module
    - timestamp_utc
    - sst_id
    - error_payload

properties:
  RRP_HOOK_ID:
    type: string
    description: "The specific RRP identifier from the SGM (e.g., RRP:POLICY_VETO)."

  layer_id:
    type: string
    description: "The GSEP-C layer (PRE, L0-L9) that triggered the halt."

  module:
    type: string
    description: "The specific module (e.g., PVLM, CTM) involved."

  timestamp_utc:
    type: string
    format: "date-time"
    description: "Time of failure capture."

  sst_id:
    type: string
    description: "Unique identifier of the System State Transition being processed."

  error_payload:
    type: object
    required:
      - reason_code
      - state_snapshot_reference

    properties:
      reason_code:
        type: string
        description: "Detailed internal reason code for the halt."
      
      state_snapshot_reference:
        type: string
        description: "URI or pointer to the immutable state snapshot taken immediately upon halt."

  remediation_guidance:
    type: string
    nullable: true
    description: "Optional, high-level guidance generated by the failing module to assist RRP orchestration."