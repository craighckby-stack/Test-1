# DIAL: DSE Integrity Analyzer Specification v2.0 (Deterministic Integrity Compliance Layer)

## 0. SCOPE AND MANDATE

The DIAL utility is a mandatory, non-negotiable protocol for deterministic Root Cause Analysis (RCA) following any Integrity Halt (IH) event within the DSE architecture. DIAL ensures cryptographic verifiability of the failure path against established baselines before authorization of any System Recovery Protocol (SRP) or Rollback-Recovery Protocol (RRP).

## 1. CORE INPUT SPECIFICATION (IH Artifact Set)

DIAL requires the complete, cryptographically signed set of Integrity Halt (IH) artifacts generated by the GSEP-C pipeline, along with time-indexed structured failure logs. Input integrity must be verified prior to processing.

| ID | Artifact Name | Source Stage | Purpose | Data Type | Integrity Requirement |
|:---:|:---:|:---:|:---|:---:|:---:|
| **A.1 (CSR)** | Configuration State Record | S01 (Pre-Execution State) | Immutable snapshot of all system configuration policies. | Hashed JSON | SHA-512 commitment signature. |
| **A.2 (ECVM)** | Execution Context Verification Map | S07 (Mid-Run State) | Verifies environmental constraints (Permissions, Resources, Dependencies). | Key-Value Map | Must conform to expected context schema. |
| **A.3 (TEMM)** | Threshold Efficacy Measure Map | S08 (Post-Check State) | Scaled efficacy metric ($\Omega$) critical for GAX I utility threshold analysis. | Scalar/Map | Numeric constraints check (e.g., $\Omega_{min} < \Omega < \Omega_{max}$). |
| **A.4 (Logs)** | Structured Failure Logs | All Stages (Temporal) | High-fidelity, time-series operational data. | Indexed JSON Lines | Indexed by Failure Trace IDs (ADTM, SGS, MPAM). |

## 2. DETERMINISTIC ANALYSIS PROCEDURE (RCA Execution)

DIAL executes a three-phase deterministic analysis. Successful analysis culminates only upon pinpointing a singular, verified deviation that triggered the integrity failure.

### 2.1 Baseline State Anchoring
*   **Action:** Query the **DSE Configuration Anchor Registry (DCAR)** using the CSR's epoch ID to retrieve the formally validated and anchored system configuration baseline ($\mathcal{B}$). 
*   **Requirement:** The retrieved baseline $\mathcal{B}$ must pass internal integrity verification before use.

### 2.2 Axiom Differential Comparison
*   **Action:** Perform a granular differential analysis by comparing the IH Artifacts (A.1, A.2, A.3) against the established baseline ($\mathcal{B}$). 
*   **Objective:** Identify the lowest-level primitive deviation that first violated a Generic Axiom (GAX). 
*   **Formal Output:** Determine the precise $\text{GAX}_{\text{FAIL}}$ (e.g., GAX I - Configuration Trust; GAX II - Context Integrity; GAX III - Performance Viability).

### 2.3 Trace Localization and Attribution
*   **Action:** Using the identified $\text{GAX}_{\text{FAIL}}$, leverage the specific Deviation Trace ID (ADTM/SGS/MPAM) within the Structured Logs (A.4). 
*   **Objective:** Localize the exact input, operation, or transaction payload that directly preceded and caused the deviation mapped in step 2.2.
*   **Success Condition:** Pinpoint the definitive operational step that resulted in the IH event.

## 3. EXPORT SPECIFICATION: IMMUTABLE FAULT REPORT (IFR)

DIAL must generate a cryptographically signed IFR, committed to the DSE ledger (or external audit system). This report is the sole authorization signal for recovery protocols (RRP/SRP).

```json
{
  "ifr_id": "UUIDv7",
  "protocol_version": "DSE_v94.6",
  "analysis_timestamp": "ISO_8601",
  "dse_event": "IntegrityHalt",
  "causal_attributes": {
    "first_fail_stage": "S0X",
    "failing_axiom": "GAX I/II/III",
    "failure_trace_id": "ADTM/SGS/MPAM"
  },
  "root_cause_summary": {
    "deviation_type": "ConfigurationTrustViolation",
    "detail": "Detailed summary of the deterministic deviation and contributing factors.",
    "is_internal_fault": true 
  },
  "verification_hashes": { 
    "csr_hash": "SHA-512 of A.1",
    "ecvm_hash": "SHA-512 of A.2",
    "temm_hash": "SHA-512 of A.3",
    "baseline_anchor_id": "DCAR_REFERENCE_ID"
  },
  "signature": "Cryptographic signature confirming report authenticity."
}
```