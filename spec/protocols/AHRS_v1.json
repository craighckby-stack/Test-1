{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://example.com/AHRS_v1.json",
  "title": "Attitude and Heading Reference System (AHRS) Protocol Specification v1",
  "description": "Standardized message format for robust sensor fusion output data.",
  "type": "object",
  "required": ["header", "data"],
  "properties": {
    "header": {
      "type": "object",
      "description": "Metadata for message integrity and ordering.",
      "properties": {
        "seq": { 
          "type": "integer", 
          "description": "Monotonic sequence number."
        },
        "ts_ns": { 
          "type": "integer", 
          "description": "Timestamp in nanoseconds since Unix epoch."
        },
        "frame_id": { 
          "type": "string", 
          "description": "Reference coordinate frame (e.g., 'BASE_LINK', 'NED')."
        }
      },
      "required": ["seq", "ts_ns", "frame_id"],
      "additionalProperties": false
    },
    "data": {
      "type": "object",
      "properties": {
        "orientation": {
          "type": "array",
          "description": "Quaternion [w, x, y, z] representation of attitude. Normalized.",
          "items": { "type": "number", "format": "float64" },
          "minItems": 4, 
          "maxItems": 4
        },
        "angular_velocity": {
          "type": "array",
          "description": "Angular velocity [rad/s] around X, Y, Z axes.",
          "items": { "type": "number", "format": "float64" },
          "minItems": 3, 
          "maxItems": 3
        },
        "linear_acceleration": {
          "type": "array",
          "description": "Linear acceleration [m/s^2] vector (often body-frame). Gravity compensated state must be inferred.",
          "items": { "type": "number", "format": "float64" },
          "minItems": 3, 
          "maxItems": 3
        },
        "calibration_status": {
          "type": "integer",
          "description": "Algorithm or sensor health indicator (e.g., bitmask)."
        }
      },
      "required": ["orientation", "angular_velocity", "linear_acceleration"],
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}