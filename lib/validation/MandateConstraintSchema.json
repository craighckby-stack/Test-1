{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MandateConstraintSchema",
  "description": "Defines structural requirements and specific evolutionary constraints for AGI Mandates, ensuring target adherence and preventing unauthorized regressions.",
  "type": "object",
  "properties": {
    "mandate_id": {
      "type": "string",
      "format": "uuid",
      "description": "Unique identifier for the evolution mandate."
    },
    "custodian": {
      "type": "string",
      "description": "Identifier of the entity or agent responsible for initiating the mandate."
    },
    "target_summary": {
      "type": "string",
      "minLength": 10,
      "description": "A high-level, human-readable description of the evolution goal."
    },
    "operational_constraints": {
      "type": "array",
      "description": "Hard limits or rules imposed on resources, complexity, or artifacts during execution.",
      "minItems": 1,
      "items": {
        "type": "object",
        "properties": {
          "scope": {
            "type": "string",
            "enum": ["CODEBASE", "EXECUTION", "METRIC", "COST"],
            "description": "The category of the constrained item."
          },
          "artifact_key": {
            "type": "string",
            "pattern": "^[a-zA-Z0-9_./-]+$",
            "description": "Specific key (e.g., file path, metric name, resource ID) being constrained."
          },
          "operator": {
            "type": "string",
            "enum": ["LT", "LTE", "EQ", "NEQ", "GT", "GTE", "PROHIBIT_VALUE", "PROHIBIT_CHANGE"],
            "description": "Comparison operator. PROHIBIT_CHANGE ensures the final value matches the pre-evolution state."
          },
          "limit_value": {
            "type": ["number", "string", "boolean"],
            "description": "The threshold or required value for the constraint."
          }
        },
        "required": ["scope", "artifact_key", "operator", "limit_value"],
        "additionalProperties": false
      }
    },
    "success_criteria": {
      "type": "object",
      "description": "Defines the quantifiable metrics and values required for mandate fulfillment.",
      "properties": {
        "metric_key": {
          "type": "string",
          "description": "The key of the primary metric used to judge success (e.g., 'latency_ms', 'test_coverage')."
        },
        "required_baseline_s02": {
          "type": "string",
          "description": "Reference key (or value) for the S02 baseline state against which the target is measured."
        },
        "required_target_value": {
          "type": ["number", "string"],
          "description": "The specific value or required performance level to be met or exceeded."
        }
      },
      "required": ["metric_key", "required_baseline_s02", "required_target_value"],
      "additionalProperties": false
    }
  },
  "required": ["mandate_id", "custodian", "target_summary", "success_criteria", "operational_constraints"],
  "additionalProperties": false
}