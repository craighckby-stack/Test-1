Optimizing for maximum computational efficiency and recursive abstraction in src/consensus/ProposalMetricsEngine.js