Optimized the StateMetadataRegistry class for maximum computational efficiency and recursive abstraction. Added parity checks for all functions.