{ "$schema": "https://json-schema.org/draft/2020-12/schema", "$id": "https://agi.sovereign/schemas/v94.2/module_interface.schema.json", "title": "Sovereign AGI Module Interface Definition (v94.2)", "description": "Defines standardized structure for module interfaces (e.g., functions, endpoints, class constructors, constants, events), enforcing strict type and definition requirements.", "type": "object", "required": [ "module_name", "version", "definitions" ], "properties": { "module_name": { "type": "string" }, "version": { "type": "string", "pattern": "^\\d+\\.\\d+\\.\\d+$" }, "definitions": { "type": "array", "items": { "type": "object", "required": [ "name", "type" ], "properties": { "name": { "type": "string" }, "type": { "type": "string", "enum": [ "FUNCTION", "CLASS_METHOD", "ENDPOINT", "CONSTANT", "EVENT" ] }, "description": { "type": "string" }, "arguments": { "description": "Parameters for callable or event interfaces (FUNCTION, CLASS_METHOD, ENDPOINT, EVENT).", "type": "array", "default": [], "items": { "type": "object", "required": [ "name", "data_type" ], "properties": { "name": { "type": "string" }, "data_type": { "type": "string", "description": "Standardized type notation (e.g., string, integer, List<UUID>, Ref<ModuleX.Config>). Should reference external type schema if complex." }, "optional": { "type": "boolean", "default": false }, "default_value": { "description": "The default value if the argument is optional.", "oneOf": [ { "type": "string" }, { "type": "number" }, { "type": "boolean" }, { "type": "null" }, { "type": "object" } ] } } } }, "returns": { "description": "Return definition for synchronous callable interfaces (FUNCTION, CLASS_METHOD) or response format for ENDPOINT.", "type": "object", "required": [ "data_type" ], "properties": { "data_type": { "type": "string" }, "description": { "type": "string" } } }, "constant_value": { "description": "Structure used only if type is CONSTANT.", "type": "object", "required": [ "data_type" ], "properties": { "data_type": { "type": "string" }, "literal_value": { "description": "Optional fixed literal value for constant validation/documentation.", "oneOf": [ { "type": "string" }, { "type": "number" }, { "type": "boolean" }, { "type": "null" }, { "type": "object" }, { "type": "array" } ] } } } }, "allOf": [ { "if": { "properties": { "type": { "enum": [ "FUNCTION", "CLASS_METHOD" ] } } }, "then": { "required": [ "arguments", "returns" ] } }, { "if": { "properties": { "type": { "const": "ENDPOINT" } } }, "then": { "required": [ "arguments" ], "properties": { "returns": { "description": "Describes the response body/format for the ENDPOINT." } } } }, { "if": { "properties": { "type": { "const": "CONSTANT" } } }, "then": { "required": [ "constant_value" ], "not": { "required": [ "arguments", "returns" ] } } }, { "if": { "properties": { "type": { "const": "EVENT" } } }, "then": { "required": [ "arguments" ], "description": "Arguments define the payload of the emitted event.", "not": { "required": [ "returns", "constant_value" ] } } } ] } } } }