{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "http://agi.sovereign.v94/schemas/godm_policy_v3.json",
  "title": "GODM Integrated Policy Configuration V3",
  "description": "Defines the holistic structure for operational policies, decision matrix weights, and required aggregation pipelines for the Goal-Oriented Decision Matrix (GODM).",
  "type": "object",
  "$defs": {
    "WeightFactor": {
      "type": "object",
      "description": "A single quantified metric used in the scoring pipeline.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the factor (e.g., 'LATENCY_PENALTY')."
        },
        "initial_weight": {
          "type": "number",
          "minimum": 0,
          "maximum": 1.0,
          "description": "The base numerical importance of this factor."
        },
        "directionality": {
          "type": "string",
          "enum": ["Positive", "Negative", "Neutral"],
          "default": "Neutral",
          "description": "How the factor's increase influences the final score (e.g., high Latency is Negative)."
        },
        "normalization_strategy": {
          "type": "string",
          "enum": ["Linear", "Logarithmic", "Sigmoid", "None"],
          "default": "Linear",
          "description": "Method for normalizing the raw factor input into a standardized score [0-1]."
        }
      },
      "required": ["id", "initial_weight"]
    },
    "DecisionRule": {
      "type": "object",
      "description": "A rule defining a conditional action based on the aggregate score.",
      "properties": {
        "name": {"type": "string"},
        "threshold": {
          "type": "number",
          "description": "The aggregate score threshold (0-1.0) that triggers this rule."
        },
        "comparison": {
          "type": "string",
          "enum": [">", "<", ">=", "<=", "=="],
          "default": ">="
        },
        "action_id": {
          "type": "string",
          "description": "The resulting action to execute (references an external Action Catalog).
"
        }
      },
      "required": ["name", "threshold", "action_id", "comparison"]
    }
  },
  "properties": {
    "FactorDefinitions": {
      "type": "array",
      "description": "List of core factors influencing decisions and their normalization profiles.",
      "items": {
        "$ref": "#/$defs/WeightFactor"
      }
    },
    "ContextualAdjustments": {
      "type": "object",
      "description": "Dynamic weight multipliers based on external operational context (e.g., LOW_POWER_MODE: 1.5 multiplier on efficiency factors).",
      "patternProperties": {
        "^[A-Z_]+$": {
          "type": "number",
          "description": "Multiplier for a specific named context."
        }
      },
      "additionalProperties": false
    },
    "DecisionMatrix": {
      "type": "array",
      "description": "Defines specific policies and the rules they evaluate against the aggregated factor scores.",
      "items": {
        "type": "object",
        "properties": {
          "policy_id": {"type": "string", "description": "Unique ID for the policy (e.g., 'RESOURCE_ALLOCATION_P5')."},
          "description": {"type": "string"},
          "target_scope": {
            "type": "string",
            "description": "The specific system or component this policy applies to (e.g., 'Core_Scheduler', 'Networking_Fabric')."
          },
          "rules": {
            "type": "array",
            "description": "Ordered list of rules to test, evaluated against the calculated aggregate score.",
            "items": {
              "$ref": "#/$defs/DecisionRule"
            },
            "minItems": 1
          }
        },
        "required": ["policy_id", "target_scope", "rules"]
      }
    },
    "DefaultAction": {
      "type": "string",
      "description": "Action taken if no specific policy matches or the resulting score is ambiguous (e.g., 'QUEUE_FOR_REVIEW')."
    }
  },
  "required": ["FactorDefinitions", "DecisionMatrix", "DefaultAction"]
}