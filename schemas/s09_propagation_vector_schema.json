{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "S09_PropagationVector_V1.0",
    "title": "S09 Constraint Propagation Vector Schema",
    "description": "Defines the mandatory structure for validated constraint propagation recommendations generated by S09_CPR.",
    "type": "object",
    "properties": {
        "timestamp": {
            "type": "string",
            "format": "date-time"
        },
        "stability_score": {
            "type": "number",
            "description": "Overall system stability assessment (0.0 to 1.0).",
            "minimum": 0.0,
            "maximum": 1.0
        },
        "recommendations": {
            "type": "array",
            "description": "List of constraints requiring action.",
            "items": {
                "type": "object",
                "properties": {
                    "constraint_id": {
                        "type": "string"
                    },
                    "action": {
                        "type": "string",
                        "enum": ["APPLY", "REVERT", "DEFER", "REFACTOR"],
                        "description": "Proposed action for the constraint."
                    },
                    "priority": {
                        "type": "integer",
                        "minimum": 1,
                        "maximum": 5,
                        "description": "1 (Highest) to 5 (Lowest)."
                    },
                    "justification_source": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "enum": ["CSR", "ECVM", "TEMM"]
                        }
                    }
                },
                "required": ["constraint_id", "action", "priority", "justification_source"]
            }
        }
    },
    "required": ["timestamp", "stability_score", "recommendations"]
}