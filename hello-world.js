•  **Decorator Pattern:** The `PyVersionChange` and `DeprecatedRemoved` classes act as decorators for Sphinx's existing `VersionChange` directive. By overriding `run()` and modifying its arguments or the `versionlabels`/`versionlabel_classes` before calling `super().run()`, they "decorate" the original directive's behavior with new logic (like expanding "next" or handling two versions for deprecation/removal) without altering the original `VersionChange` class itself. This is then applied via `app.add_directive(..., override=True)`.

•  **Template Method Pattern:** The `VersionChange` class (from Sphinx, which `PyVersionChange` and `DeprecatedRemoved` inherit from) defines a `run()` method that serves as a template. Subclasses `PyVersionChange` and `DeprecatedRemoved` provide specific implementations for parts of this template (e.g., how arguments are processed, how labels are determined) while reusing the overall structure of `run()` by calling `super().run()`. This allows for consistent structure with customizable steps.

•  **Adapter Pattern:** The `PyVersionChange` and `DeprecatedRemoved` classes serve as adapters. They adapt Sphinx's standard version-change directives to support new functionalities, specifically the "next" argument expansion and the "deprecated-removed" two-version handling. They provide a compatible interface (`run` method) that Sphinx expects for its directives but internally translate or extend the behavior to match the new requirements.

•  **Factory Pattern:** The Sphinx application itself (via `app.add_directive`) acts as a factory for directives. When `app.add_directive` is called, it registers a class (like `PyVersionChange` or `DeprecatedRemoved`) that Sphinx will then instantiate as needed when it encounters the corresponding directive in the reStructuredText source.

•  **Façade Pattern:** The `setup` function acts as a façade for integrating this extension with Sphinx. It provides a simplified, single entry point for the Sphinx application to consume all the functionalities (directive overrides, new directive registration) offered by this module, hiding the underlying complexity of directive definitions and modifications.

•  **Strategy Pattern:** The modification of `versionlabels` and `versionlabel_classes` within the `DeprecatedRemoved` class, based on a comparison of the current version and the removal version (`current_version < removed_version`), can be seen as implementing a strategy. The "strategy" for displaying the label and its class (either "deprecated" or "removed") is chosen dynamically at runtime based on the state (current version relative to removed version). The rest of the `run()` method then proceeds using this selected strategy for labeling.