{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agi.kernel/schemas/APITelemetry.json",
  "title": "AGI_Kernel_APITelemetry_v7_5_0",
  "description": "Strict schema for tracking performance, resource consumption, and synergy utilization metrics of AGI kernel API calls.",
  "type": "object",
  "properties": {
    "telemetry_id": { "type": "string", "format": "uuid", "description": "Unique UUID for the telemetry event." },
    "timestamp": { "type": "string", "format": "date-time", "description": "ISO 8601 timestamp of the event." },
    "cycle": { "type": "integer", "minimum": 0, "description": "The active Synergy Loop cycle number." },
    "source_module": { "type": "string", "description": "The module originating the call (e.g., WeightedExplorationSelector, PolicyConstraintSynthesizer)." },
    "target_endpoint": { "type": "string", "description": "The API endpoint accessed (internal or external)." },
    "model_id": { "type": "string", "description": "The specific large language model utilized (e.g., Gemini 2.5 Flash)." },
    "status_code": { "type": "integer", "description": "HTTP status or equivalent operational code (e.g., 200, 404, -1 for internal failure)." },
    "latency_ms": { "type": "number", "minimum": 0, "description": "Total processing time in milliseconds." },
    "resource_units_consumed": { "type": "number", "minimum": 0, "description": "Normalized computational resource footprint (e.g., GPU cycles, tokens)." },
    "synergy_utilization": {
      "type": "object",
      "description": "Tracks invocation and performance of Emergent Capabilities (ECM tools).",
      "properties": {
        "tools_invoked_count": { "type": "integer", "minimum": 0 },
        "tools_invoked": { "type": "array", "items": { "type": "string" }, "description": "List of interfaceNames utilized in this operation." },
        "total_synergy_latency_ms": { "type": "number", "minimum": 0, "description": "Cumulative latency added by emergent tools." }
      },
      "required": ["tools_invoked_count", "tools_invoked"]
    },
    "result_metadata": {
      "type": "object",
      "properties": {
        "success": { "type": "boolean" },
        "error_details": { "type": ["string", "null"] }
      },
      "required": ["success"]
    }
  },
  "required": ["telemetry_id", "timestamp", "cycle", "source_module", "target_endpoint", "status_code", "latency_ms", "synergy_utilization"]
}