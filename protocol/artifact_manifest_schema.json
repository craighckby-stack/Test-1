{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://agi.sovereign/v94/artifact_manifest.json",
  "title": "Sovereign AGI Artifact Manifest v94.1",
  "type": "object",
  "description": "Defines the structured output, context, and performance metrics for a successful code evolution run.",
  "properties": {
    "manifest_version": {
      "type": "string",
      "const": "94.1.0",
      "description": "Strict schema version identifier."
    },
    "artifact_uuid": {
      "type": "string",
      "format": "uuid",
      "description": "Globally unique identifier for this specific artifact generation run."
    },
    "execution_context": {
      "type": "object",
      "description": "Metadata concerning the mission and temporal context.",
      "properties": {
        "objective_id": { "type": "string", "description": "ID of the primary mission or objective driving the generation." },
        "parent_artifact_uuid": { "type": ["string", "null"], "format": "uuid", "description": "UUID of the artifact this run is refining or depending upon." },
        "timestamp_utc": { "type": "string", "format": "date-time" }
      },
      "required": ["objective_id", "timestamp_utc"]
    },
    "evolution_report": {
      "type": "object",
      "description": "Key performance indicators and resource usage metrics.",
      "properties": {
        "model_engine": { "type": "string", "enum": ["v94.1-core", "v94.1-refinement"] },
        "cost_usd": { "type": "number", "minimum": 0.0, "description": "Total estimated execution cost." },
        "efficiency_score": { "type": "number", "minimum": 0.0, "maximum": 1.0, "description": "Normalized metric representing objective fulfillment vs. resource consumption." },
        "validation_status": { "type": "string", "enum": ["SUCCESS", "PARTIAL", "FAILURE"] }
      },
      "required": ["model_engine", "efficiency_score", "validation_status"]
    },
    "generated_artifacts": {
      "type": "array",
      "description": "List of components produced, ensuring content integrity.",
      "items": {
        "$ref": "#/definitions/ArtifactEntry"
      },
      "minItems": 1
    }
  },
  "required": ["manifest_version", "artifact_uuid", "execution_context", "evolution_report", "generated_artifacts"],
  "definitions": {
    "ArtifactEntry": {
      "type": "object",
      "description": "Individual generated file or component metadata.",
      "properties": {
        "path": { "type": "string", "description": "The file path relative to the root workspace." },
        "checksum_sha256": { "type": "string", "pattern": "^[a-fA-F0-9]{64}$", "description": "Immutable content verification hash." },
        "artifact_type": {
          "type": "string",
          "description": "Type discriminator for targeted downstream processing.",
          "enum": ["CODE", "SCHEMA", "TEST_REPORT", "CONFIGURATION", "DOCUMENTATION", "UTILITY_SCRIPT"]
        },
        "size_bytes": { "type": "integer", "minimum": 0 },
        "type_metadata": {
          "type": "object",
          "description": "Polymorphic data structure for type-specific properties (e.g., complexity score, language)."
        }
      },
      "required": ["path", "checksum_sha256", "artifact_type", "size_bytes"]
    }
  }
}