{
  "$id": "https://agi.sovereign.v94.1/protocol/execution_context_schema.json",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Sovereign AGI Pre-Execution Context Schema",
  "description": "Defines the state of the execution environment and all source material *before* the AGI cycle commences, essential for cryptographic reproducibility and integrity verification. All cryptographic hashes must use SHA-256.",
  "type": "object",
  "required": [
    "execution_id",
    "agi_version",
    "timestamp_start",
    "input_state_hash",
    "system_environment"
  ],
  "properties": {
    "agi_version": {
      "type": "string",
      "description": "The specific version of the Sovereign AGI (e.g., v94.1) initiating this execution."
    },
    "execution_id": {
      "type": "string",
      "format": "uuid",
      "description": "Globally unique identifier for the specific execution run."
    },
    "timestamp_start": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp marking the precise start time of the execution cycle."
    },
    "input_state_hash": {
      "type": "string",
      "pattern": "^[a-f0-9]{64}$",
      "description": "Cryptographic root hash (SHA-256) of the entire contextual input filesystem provided to the AGI (e.g., using a Merkle tree)."
    },
    "system_environment": {
      "type": "object",
      "description": "Detailed specification of the runtime environment.",
      "properties": {
        "os": {
          "type": "string"
        },
        "architecture": {
          "type": "string"
        },
        "cpu_cores": {
          "type": "integer"
        },
        "memory_limit_mb": {
          "type": "integer",
          "description": "The maximum available memory for the execution process."
        },
        "runtime_version": {
          "type": "string",
          "description": "Version of the primary language runtime used (e.g., 'Node 20.10.0', 'Python 3.11')."
        },
        "dependencies_hash": {
          "type": "string",
          "pattern": "^[a-f0-9]{64}$",
          "description": "SHA-256 hash of the dependency manifest file/lock state."
        }
      },
      "required": [
        "os",
        "architecture",
        "dependencies_hash",
        "runtime_version"
      ]
    },
    "source_mapping": {
      "type": "array",
      "description": "Detailed list of every file/resource explicitly processed or used as context input.",
      "items": {
        "type": "object",
        "required": [
          "path",
          "checksum_hash"
        ],
        "properties": {
          "path": {
            "type": "string",
            "description": "Relative path of the source file."
          },
          "checksum_hash": {
            "type": "string",
            "pattern": "^[a-f0-9]{64}$",
            "description": "SHA-256 content hash of the file."
          },
          "is_external": {
            "type": "boolean",
            "default": false,
            "description": "True if the source originated outside the primary context filesystem."
          }
        }
      }
    }
  }
}